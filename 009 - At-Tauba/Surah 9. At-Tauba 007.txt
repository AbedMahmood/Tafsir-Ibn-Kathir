Tafsir Ibn Kathir- Surah 9. At-Tauba, Ayah 7

كَيْفَ يَكُونُ لِلْمُشْرِكِينَ عَهْدٌ عِنْدَ اللَّهِ وَعِنْدَ رَسُولِهِ إِلَّا الَّذِينَ عَاهَدْتُمْ عِنْدَ الْمَسْجِدِ الْحَرَامِ ۖ فَمَا اسْتَقَامُوا لَكُمْ فَاسْتَقِيمُوا لَهُمْ ۚ إِنَّ اللَّهَ يُحِبُّ الْمُتَّقِينَ٧
7. How can there be a covenant with Allah and with His Messenger for the Mushrikin except those with whom you made a covenant near Al-Masjid Al-Haram (at Makkah) So long as they are true to you, stand you true to them. Verily, Allah loves those who have Taqwa.

Affirming the Disavowel of the Idolators

Allah mentions the wisdom in dissolving all obligations to the idolators and giving them a four month period of safety, after which they will meet the sharp sword wherever they are found,

﴿كَيْفَ يَكُونُ لِلْمُشْرِكِينَ عَهْدٌ﴾
(How can there be a covenant for the Mushrikin), a safe resort and refuge, while they persist in Shirk with Allah, and disbelief in Him and His Messenger,

﴿إِلاَّ الَّذِينَ عَـهَدْتُمْ عِندَ الْمَسْجِدِ الْحَرَامِ﴾
(except those with whom you made a covenant near Al-Masjid Al-Haram), on the day of Hudaybiyyah. Allah said in another Ayah ﴿concerning the day of Hudaybiyyah﴾,

﴿هُمُ الَّذِينَ كَفَرُواْ وَصَدُّوكُمْ عَنِ الْمَسْجِدِ الْحَرَامِ وَالْهَدْىَ مَعْكُوفاً أَن يَبْلُغَ مَحِلَّهُ﴾
(They are the ones who disbelieved and hindered you from Al-Masjid Al-Haram and detained the sacrificial animals, from reaching their place of sacrifice.) ﴿48:25﴾ Allah said next,

﴿فَمَا اسْتَقَـمُواْ لَكُمْ فَاسْتَقِيمُواْ لَهُمْ﴾
(So long as they are true to you, stand you true to them.), if they keep the terms of the treaties you conducted with them, including peace between you and them for ten years,

﴿فَاسْتَقِيمُواْ لَهُمْ إِنَّ اللَّهَ يُحِبُّ الْمُتَّقِينَ﴾
(then stand you true to them. Verily, Allah loves those who have Taqwa.) The Messenger of Allah and the Muslims preserved the terms of the treaty with the people of Makkah from the month of Dhul-Qa`dah in the sixth year ﴿of Hijrah﴾, until the Quraysh broke it and helped their allies, Banu Bakr, against Khuza`ah, the allies of Allah's Messenger . Aided by the Quraysh, Banu Bakr killed some of Bani Khuza`ah in the Sacred Area! The Messenger of Allah led an invasion army in the month of Ramadan, of the eighth year, and Allah opened the Sacred Area for him to rule over them, all thanks are due to Allah. The Messenger of Allah freed the Quraysh who embraced Islam after they were overpowered and defeated. These numbered around two thousands, and they were refered to by the name `Tulaqa' afterwards. Those among them who remained in disbelief and ran away from Allah's Messenger were sent promises of safe refuge for four months, during which they were allowed to move about freely. They included Safwan bin Umayyah, `Ikrimah bin Abi Jahl and many others. Allah later on guided them to Islam, and they became excellent believers. Surely, Allah is worthy of all praise for all His actions and decrees.